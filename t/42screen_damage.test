INIT
WANTSCREEN d

!Putglyph
RESET
  damage 0..25,0..80
PUSH "123"
  damage 0..1,0..1
  damage 0..1,1..2
  damage 0..1,2..3

!Erase
PUSH "\e[H"
PUSH "\e[3X"
  damage 0..1,0..3

!Scroll damages entire line in two chunks
PUSH "\e[H\e[5@"
  damage 0..1,5..80
  damage 0..1,0..5

!Scroll down damages entire screen in two chunks
PUSH "\e[T"
  damage 1..25,0..80
  damage 0..1,0..80

WANTSCREEN m

!Scroll invokes moverect but not damage
PUSH "\e[5@"
  moverect 0..1,0..75 -> 0..1,5..80
  damage 0..1,0..5

WANTSCREEN -m

!Merge to cells
RESET
  damage 0..25,0..80
DAMAGEMERGE CELL

PUSH "A"
  damage 0..1,0..1
PUSH "B"
  damage 0..1,1..2
PUSH "C"
  damage 0..1,2..3

!Merge entire rows
!! TODO
RESET
  damage 0..25,0..80
DAMAGEMERGE ROW

PUSH "ABCDE\r\nEFGH"
  damage 0..1,0..5
DAMAGEFLUSH
  damage 1..2,0..4
PUSH "\e[3;6r\e[6H\eD"
  damage 2..5,0..80
DAMAGEFLUSH
  damage 5..6,0..80

!Merge entire screen
RESET
  damage 0..25,0..80
DAMAGEMERGE SCREEN

PUSH "ABCDE\r\nEFGH"
DAMAGEFLUSH
  damage 0..2,0..5
PUSH "\e[3;6r\e[6H\eD"
DAMAGEFLUSH
  damage 2..6,0..80

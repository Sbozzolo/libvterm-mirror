INIT
UTF8 1
WANTSTATE gce

!Insert/Replace Mode
RESET
  erase 0..25,0..80
  ?cursor = 0,0
PUSH "AC\e[DB"
  putglyph 0x41 1 0,0
  putglyph 0x43 1 0,1
  putglyph 0x42 1 0,1
PUSH "\e[4h"
PUSH "\e[G"
PUSH "AC\e[DB"
  copyrect 0..1,0..79 -> 0..1,1..80
  erase 0..1,0..1
  putglyph 0x41 1 0,0
  copyrect 0..1,1..79 -> 0..1,2..80
  erase 0..1,1..2
  putglyph 0x43 1 0,1
  copyrect 0..1,1..79 -> 0..1,2..80
  erase 0..1,1..2
  putglyph 0x42 1 0,1

!Insert mode only happens once for UTF-8 combining
PUSH "e"
  copyrect 0..1,2..79 -> 0..1,3..80
  erase 0..1,2..3
  putglyph 0x65 1 0,2
PUSH "\xCC\x81"
  putglyph 0x65,0x301 1 0,2
